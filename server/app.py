import base64
import io
import os

import numpy as np
from PIL import Image
from flask import Flask, request
from keras.models import load_model
from keras_preprocessing.image import img_to_array

app = Flask(__name__)

threshold = 0.5
img_size = (256, 256)

# Uncomment to use CPU instead of any visible GPUs
# os.environ['CUDA_VISIBLE_DEVICES'] = '-1'

model = load_model('../model')
model.summary()

# Very simple homepage, too lazy to separate into a template
# language=HTML
home_html = '''
    <!DOCTYPE html>
    <title>
        üççIs Pineapple Pizza or Notüçï
    </title>
    
    <link rel="icon" href="data:image/png;base64,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">
    
    <body>
    <div style="text-align: center; font-size: 1.7em; margin-top: 2em;">
        <h1>
            ‚ùì<u>üççIs Pineapple Pizza or Notüçï</u>‚ùì
        </h1>
        <p>Upload an image to find out if it's pineapple pizza or not</p>
        <form method=post enctype=multipart/form-data>
            <input type=file name=image style="font-size: 1.2rem;">
            <input type=submit value="‚ùìüççFind outüçï‚ùì" style="font-size: 1.2rem;">
        </form>
        
        <div style="position: fixed; bottom: 50px; width: 100%; text-align: center; font-size: 0.75rem;">
            <div>
                I had no idea what I was doing. I am not responsible for any pineapple pizza related injuries.
                <br/>
                A better model may be coming at some point...
                <br/>
                Created by <a href="https://github.com/toppev">toppev</a>
            </div>
            
            <img src="https://github.com/favicon.ico" width="16" height="16" />
            <a href="https://github.com/toppev/is-pineapple-pizza">Github</a>
        </div>
    </div>
    '''


def prepare_image(image):
    # Make sure it's RGB
    if image.mode != "RGB":
        image = image.convert("RGB")
    image = image.resize(img_size)
    image = img_to_array(image)
    image = np.expand_dims(image, axis=0)
    return image


@app.route('/', methods=['GET', 'POST'])
def upload_file():
    if request.method == 'POST':
        img_data = request.files["image"]
        if img_data:
            data = img_data.read()
            image = Image.open(io.BytesIO(data))
            image = prepare_image(image)

            result = model.predict(image)
            accuracy = result[0][0]
            is_pineapple = accuracy > threshold
            label = ("" if is_pineapple else "Not ") + "Pineapple Pizza"
            color = "green" if is_pineapple else "red"

            # language=HTML
            return home_html + """
                <div style="text-align: center; margin-top: 100px;">
                    <h2 style="color: %s"> %s (%s%%)</h2>
                    <img style="width: 600px; box-shadow: 0 0 10px 10px %s; border-radius: 10px;" src="data:image/jpg;base64, %s "/>
                </div>
                </div>
            """ % (color, label, str(round(accuracy * 100, 2)), color, base64.b64encode(data).decode('ascii'))

    return home_html
